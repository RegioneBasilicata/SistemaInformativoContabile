<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=Cp1252" />
<script src="../dbdoc.js" type="text/javascript"></script>
<link href="../dbdoc.css" type="text/css" rel="stylesheet">
</head>
<body class="object">
<div id="header"><h2>FIN_MANDATI1</h2>
<div class="tabs clearfix">

<div class="tab"><div><a href="FIN_MANDATI1.html">Colonne</a></div></div>
<div class="tab"><div><a href="FIN_MANDATI1_Autorizzazioni.html">Autorizzazioni</a></div></div>
<div class="tab"><div><a href="FIN_MANDATI1_Dipendenze.html">Dipendenze</a></div></div>
<div class="tab" id="current"><div><a href="FIN_MANDATI1_Dettagli.html">Dettagli</a></div></div>
<div class="tab"><div><a href="FIN_MANDATI1_Trigger.html">Trigger</a></div></div>
</div></div><br/>
<div class="tab-panes">
<div id="Dettagli"> <table cellpadding="0" cellspacing="0" cellspacing="0" summary=""><tr>
	<th>Name</th>
	<th>Value</th>
</tr>
	<tr>
<td>CREATED</td>
<td>2011-12-07</td>
	</tr>
	<tr>
<td>LAST_DDL_TIME</td>
<td>2019-09-04</td>
	</tr>
	<tr>
<td>OWNER</td>
<td>GAT2</td>
	</tr>
	<tr>
<td>VIEW_NAME</td>
<td>FIN_MANDATI1</td>
	</tr>
	<tr>
<td>TEXT_LENGTH</td>
<td>11309</td>
	</tr>
	<tr>
<td>TEXT</td>
<td>SELECT   jugd.doc_sequence_value numero_mandato,
            DECODE (jugd.administrative_expedient,
                    NULL, jugd.ext_document_ref,
                    jugd.administrative_expedient)
               numero_mand_mainframe,
            jugd.date_created data_emissione_mandato,
            DECODE (UPPER (jugd.doc_type),
                    'MAND',
                    'V',
                    'ST-MAND',
                    'A')
               valido_annullato,
            DECODE (
               UPPER (NVL (jugd.proposal_status_flag, 'Z'))
               || UPPER (NVL (jugd.auditing_status_flag, 'Z')),
               'PI',
               'A',
               'B'
            )
               tipologia_mandato,
            jugd3.doc_sequence_value numero_storno,
            jugd3.date_created data_storno,
            jugd.document_amount importo_lordo_documento,
            jugd.description oggetto_mandato,
            NVL (jugdtp.stampa_avviso, 'S') stampa_avviso_mandato,
            jugdtp.codice_gestionale_siope codice_gestionale_siope,
            jugdtp.id_ana id_fornitore,
            jugdtp.id_sede codice_sede_fornitore,
            jugdtp.dato_sensibile,
            pv.ID codice_fornitore,
            NVL (pv.denominazione, pv.cognome || ' ' || pv.nome)
               nome_fornitore,
            pv.data_ns data_nascita,
            pv.codice_fiscale codice_fiscale,
            pv.partita_iva partita_iva,
            pv.pignoramento pignoramento,
            DECODE (
               pvsa.cf_lr,
               NULL,
               DECODE (pv.cognome_lr,
                       NULL, NULL,
                       pv.cognome_lr || ' ' || pv.nome_lr),
               DECODE (pvsa.cognome_lr,
                       NULL, NULL,
                       pvsa.cognome_lr || ' ' || pvsa.nome_lr)
            )
               rappresentante_legale,
            NVL (pv.cf_lr, pvsa.cf_lr) codfisc_rappresentante_legale,
            DECODE (pvsa.cf_lr, NULL, pv.data_ns_lr, pvsa.data_ns_lr)
               datanasc_rappresentante_legale,
            pvsa.nome_sede nome_sede_fornitore,
            pvsa.indirizzo indirizzo_fornitore,
            NVL (pvsa.comune_sede_oa, ftc.descrizione) citta_fornitore,
            ftc.provincia provincia_fornitore,
            pvsa.cap_sede cap_fornitore,
            ftc.nazione nazione_fornitore,
            UPPER (pv.tipo_anagrafica) stato_fornitore,
            NVL (jugdtp.bollo, 'N') bollo,
            jugd.attribute6 tipologia_reddito,
            jugd.attribute10 valido770,
            SUBSTR (jugd.segment2, 1, 6) capitolo_spesa,
            jugd.attribute16 piano_conti_fina,
            jugd.attribute16 piano_conti_finanziario, -- qualche burlone ha cambiato il nome del campo e sono costretto a tenerlo 2 volte
            a.codice_meccanografico codice_meccanografico,
            nb1.codice || '.' || nb2.codice || '.' || NVL (a.nb_titolo, 0)
               missione_programma_titolo,
            a.capitolo upb,
            jugd.segment4 voce_piano_conti,
            jugd.gl_date data_registrazione,
            TO_NUMBER (NVL (jugdtp.amount, 0), '999999999D99')
               importo_totale_mandato,
            (NVL (jugdtp.amount, 0)
             - (  NVL (jugdtp.attribute4, 0)
                + NVL (jugdtp.attribute10, 0)
                + NVL (jugdtp.attribute9, 0)
                + NVL (jugdtp.attribute6, 0)
                + NVL (jugdtp.attribute12, 0)
                + NVL (jugdtp.attribute5, 0)))
               importo_netto,
            TO_NUMBER (NVL (jugdtp.attribute3, 0), '999999999D99')
               imponibile_irpef,
            TO_NUMBER (NVL (jugdtp.attribute4, 0), '999999999D99')
               ritenuta_irpef,
            TO_NUMBER (NVL (jugdtp.attribute9, 0), '999999999D99')
               addizionale_comunale,
            TO_NUMBER (NVL (jugdtp.attribute10, 0), '999999999D99')
               addizionale_regionale,
            TO_NUMBER (NVL (jugdtp.attribute7, 0), '999999999D99')
               imponibile_previdenziale,
            TO_NUMBER (NVL (jugdtp.attribute8, 0), '999999999D99')
               ritenute_previdenziali_ente,
            TO_NUMBER (NVL (jugdtp.attribute5, 0), '999999999D99')
               ritenute_previdenziali_ben,
            TO_NUMBER (NVL (jugdtp.attribute6, 0), '999999999D99')
               altre_ritenute,
            TO_NUMBER (NVL (jugd.attribute20, 0), '999999999D99')
               imponibile_irap,
            TO_NUMBER (NVL (jugd.attribute5, 0), '999999999D99') imposta_irap,
            TO_NUMBER (NVL (jugdtp.attribute12, 0), '999999999D99') iva,
            NVL (jugd.attribute30, 'N') sistemazione_contabile,
            jugd.mandrev_sostituito numero_mandato_sostituito,
            jugd1.doc_sequence_value numero_liquidazione,
            DECODE (jugd1.ext_document_ref,
                    NULL, jugd1.administrative_expedient,
                    jugd1.ext_document_ref)
               numero_liq_mainframe,
            jugd2.doc_sequence_value numero_impegno,
            DECODE (jugd2.ext_document_ref,
                    NULL, jugd2.administrative_expedient,
                    jugd2.ext_document_ref)
               numero_imp_mainframe,
            jugd4.doc_sequence_value numero_impegno_rif_perente,
            DECODE (jugd4.ext_document_ref,
                    NULL, jugd4.administrative_expedient,
                    jugd4.ext_document_ref)
               numero_imp_rif_per_mainframe,
            jugd2.document_amount importo_impegno,
            DECODE (UPPER (jugd2.doc_type),
                    'IMP-DEF', 'IMP',
                    UPPER (jugd2.doc_type))
               tipo_impegno,
            jugd.segment8 esercizio_mandato,
            jugd2.segment8 esercizio_impegno,
            jugd4.segment8 esercizio_impegno_rif_perente,
            jugd.segment3 dipartimento, --modificato il 25.01.2013 prendo l'ufficio del mandato invece che dell'impegno
            jugd1.attribute12 id_provvedimento,
            jugd1.segment3 || '.' || SUBSTR (jugd1.attribute15, 1, 4) || '/'
            || DECODE (jugd1.attribute13,
                       'DETERMINA', 'D',
                       'DISPOSIZIONE', 'L',
                       'X')
            || '.'
            || LPAD (jugd1.attribute14, 5, '0')
               id_provvedimento_calcolato,
            jugd1.attribute13 tipo_atto_liq,
            jugd1.attribute14 numero_atto_liq,
            jugd1.attribute15 data_atto_liq,
            jugd2.attribute13 tipo_atto_imp,
            jugd2.attribute14 numero_atto_imp,
            jugd2.attribute15 data_atto_imp,
            fu.user_name compilatore,
            jugdtp.payment_method_lookup_code codice_metodo_pagamento,
            alc.descrizione metodo_pagamento,
            jugdtp.attribute2 info_pagamento,
            jugdtp.remarks || ' ' || jugdtp.attribute11 info_aggiuntive,
            abaua.conto_corrente conto_corrente,
            DECODE (jugdtp.iban_delegato,
                    NULL, NVL (abaua.iban, ''),
                    jugdtp.iban_delegato)
               iban,
            abb_t.abi abi,
            abb.cab cab,
            abb_t.nome_banca || ' ' || abb.sede banca,
            abb.indirizzo indirizzo_banca,
            abb.citta citta_banca,
            abb.nazione nazione_banca,
            abb.cap cap_banca,
            abb.provincia provincia_banca,
            alc1.ID pv_codice_metodo_pagamento,
            alc1.descrizione pv_metodo_pagamento,
            abaa2.iban pv_iban,
            abaa2.conto_corrente pv_conto_corrente,
            abb_t1.abi pv_abi,
            abb1.cab pv_cab,
            abb_t1.nome_banca || ' ' || abb1.sede pv_banca,
            abb1.indirizzo pv_indirizzo_banca,
            abb1.citta pv_citta_banca,
            abb1.nazione pv_nazione_banca,
            abb1.cap pv_cap_banca,
            abb1.provincia pv_provincia_banca,
            alc.desc_pagamento_tesoriere desc_pagamento_tesoriere,
            jugd.doc_id doc_id,
            jugdtp.anagrafica_delegato anagrafica_delegato,
            jugdtp.codice_fiscale_delegato codice_fiscale_delegato,
            jugdtp.id_delegato id_delegato,
            jugdtp.id_sede_delegato id_sede_delegato,
            NVL (abaua.provincia_tesoreria, '') provincia_tesoreria,
            NVL (jugdtp.commissioni, pv.commissioni) commissioni,
            NVL (abaua.codice_versamento_bonifici, '')
               codice_versamento_bonifici,
            jugdtp.THIRD_PARTY_LINE_NUM progressivo_ana,
            jugdtp.codice_cup codice_cup,
            jugdtp.codice_cig codice_cig,
            jugd.cod_conto_evidenza cod_conto_evidenza,
            jugdtp.tipo_contabilita_ente_ricev tipo_contabilita_ente_ricev,
            jugdtp.destinazione destinazione,
            jugdtp.attribute13 tipo_delegato,
            abaua.bic,
            jugd.data_esecuzione_pagamento,
            omec.descrizione desc_motivo_escl_cig,
            a.nb_uscita_ricorrente,
            a.nb_cofog_ii_livello,
			a.nb_codice_transazione
     FROM   fin_t_documenti jugd,
            fin_t_documenti_terze_parti jugdtp,
            fin_t_anagrafica pv,
            fin_t_ana_sedi pvsa,
            fin_t_comuni ftc,
            fin_t_documenti jugd1,
            fin_t_documenti jugd2,
            fin_t_documenti jugd3,
            fin_t_documenti jugd4,
            /* serve per trovare l'impegno perente*/
            fnd_user fu,
            fin_t_tipo_pagamenti alc,
            fin_t_ana_conti_bancari abaua,
            fin_t_banche abb,
            fin_t_banche_testata abb_t,
            fin_t_tipo_pagamenti alc1,
            fin_t_ana_conti_bancari abaa2,
            fin_t_banche abb1,
            fin_t_banche_testata abb_t1,
            fin_t_articoli a,
            nb_livello1 nb1,
            nb_livello2 nb2,
            opi_motivi_esclusione_cig omec
    WHERE       UPPER (jugd.doc_type) IN ('MAND', 'ST-MAND')
          --  AND jugd.segment8 >=  to_char(sysdate,'yyyy') - 1
            AND jugdtp.doc_id(+) = jugd.doc_id
            AND pvsa.id_ana(+) = jugdtp.id_ana
            AND pvsa.id_sede(+) = jugdtp.id_sede
            AND pv.ID(+) = pvsa.id_ana
            AND jugd.previous_doc_id = jugd1.doc_id
            AND jugd1.previous_doc_id = jugd2.doc_id
            AND jugd.doc_id = jugd3.previous_doc_id(+)
            AND UPPER (jugd3.doc_type(+)) = 'ST-MAND'
            AND jugd2.previous_doc_id = jugd4.doc_id(+)
            AND jugd.created_by = fu.user_id
            AND jugdtp.id_pagamento = alc.ID(+)
            AND jugdtp.id_conto_bancario = abaua.ID(+)
            AND abaua.banca_id = abb.ID(+)
            AND abb_t.abi(+) = abb.abi
            AND pvsa.id_tipo_pagamento = alc1.ID(+)
            AND pvsa.id_ana = abaa2.id_ana(+)
            AND pvsa.id_sede = abaa2.id_sede(+)
            AND abaa2.modalita_principale_sn(+) = 'S'
            AND abaa2.banca_id = abb1.ID(+)
            AND abb_t1.abi(+) = abb1.abi
            AND pvsa.id_comune_sede = ftc.ID(+)
            AND jugd.segment8 = a.anno(+)
            AND SUBSTR (jugd.segment2, 1, 1) = a.eu(+)
            AND SUBSTR (jugd.segment2, 2, 5) = a.codice(+)
            AND a.nb_id_padre = nb2.id(+)
            AND nb1.id(+) = nb2.id_livello1
            AND jugdtp.motivo_esclusione_cig = omec.id(+)</td>
	</tr>
	<tr>
<td>TYPE_TEXT_LENGTH</td>
<td>null</td>
	</tr>
	<tr>
<td>TYPE_TEXT</td>
<td>null</td>
	</tr>
	<tr>
<td>OID_TEXT_LENGTH</td>
<td>null</td>
	</tr>
	<tr>
<td>OID_TEXT</td>
<td>null</td>
	</tr>
	<tr>
<td>VIEW_TYPE_OWNER</td>
<td>null</td>
	</tr>
	<tr>
<td>VIEW_TYPE</td>
<td>null</td>
	</tr>
	<tr>
<td>SUPERVIEW_NAME</td>
<td>null</td>
	</tr>
	<tr>
<td>EDITIONING_VIEW</td>
<td>N</td>
	</tr>
	<tr>
<td>READ_ONLY</td>
<td>N</td>
	</tr>
</table></div>